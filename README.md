# newRnProj

Проект на react-native

**Все файлы пишем в _кебаб-кейсе_, все экспорты должны быть именованными (без _default_)**

Для запуска на _ios_ необходимо ввести команду `yarn ios`

Для запуска на _android_ необходимо ввести команду `yarn android`

##### На этом проекте используется feature-sliced архитектура

### О чем стоит помнить

##### По уровню знания/ответственности​

`app` > `processes` > `pages` > `widgets` > `features` > `entities` > `shared`

**Модуль "знает" только про себя и нижележащие модули, но не вышележащие**
_Это же влияет и на разрешенные импорты_

##### По уровню опасности изменений​

`shared` > `entities` > `features` > `widgets` > `pages` > `processes` > `app`

**Чем ниже расположен модуль - тем опаснее вносить в него изменения**
_Т.к. скорее всего он заиспользован во многих вышележащих слоях_

### Слайс внутри слоя так же имеет свою иерархию

`ui` > `model` > `api` > `lib` > `config` > `...`

### Example

```
├── app/
|   # Не имеет конкретных слайсов,
|   # Т.к. там содержится мета-логика над проектом и его инициализации
├── processes/
|   # Слайсы для реализации процессов на страницах
|   ├── payment
|   ├── auth
|   ├── quick-tour
|   └── ...
├── pages/
|   # Слайсы для реализации страниц приложения
|   # При этом, в силу специфики роутинга - могут вкладываться друг в друга
|   ├── profile
|   ├── sign-up
|   ├── feed
|   └── ...
├── widgets/
|   # Слайсы для реализации самостоятельных блоков страниц
|   ├── header
|   ├── feed
|   └── ...
├── features/
|   # Слайсы для реализации пользовательских сценариев на страницах
|   ├── auth-by-phone
|   ├── inline-post
|   └── ...
├── entities/
|   # Слайсы бизнес-сущностей для реализации более сложной БЛ
|   ├── viewer
|   ├── posts
|   ├── i18n
|   └── ...
├── shared/
|    # Не имеет конкретных слайсов
|    # Представляет собой скорее набор общеиспользуемых сегментов, без привязки к БЛ
```

### Общие правила​

1. Чем выше расположен слой - тем больше он знает про БЛ приложения и наоборот
2. API логику рекомендуется класть в shared, чтобы логика не распылялась по проекту
   - Как правило - она общая и представлена в виде единых инстансов
   - Edge-case "exceptions": GraphQL, react-query hooks

| Слой      | Содержимое                                                                                    | Разрешенные сегменты                                                                                                                                                  |
| --------- | --------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| app       | Не включает в себя слайсы и содержит логику инициализации                                     | Имеющиеся сегменты не совсем подходят, а потому используются обычно /providers ( /hoc , ...), /styles и т.д. Очень зависит от проекта и вряд ли решается методологией |
| processes | Слайсы внутри включают в себя только бизнес-логику, без отображения                           | `lib` `model` ( `api` )                                                                                                                                               |
| pages     | Слайсы внутри включают в себя ui- и model- композицию различных фичей для конкретной страницы | `ui` `lib` `model` ( `api` )                                                                                                                                          |
| features  | Слайсы внутри включают в себя композицию сущностей и реализацию БЛ в модели + отображение     | `ui` `lib` `model` ( `api` )                                                                                                                                          |
| entities  | Слайсы внутри представляют разрозненный набор подмодулей для использования                    | `ui` `lib` `model` ( `api` )                                                                                                                                          |
| shared    | Содержит только инфраструктурную логику без БЛ                                                | `ui` `lib` `api`                                                                                                                                                      |

### Выявление проблем

Подобные нарушения являются сигналом проблем:

1. **Модуль имеет импорт из другого модуля со своего слоя**

   - Возможно, модуль был излишне раздроблен или имеет лишнюю ответственность.
   - Следует объединить его с импортируемым модулем или вынести его (частично или целиком) на слой ниже или перенести логику связей в модули на вышестоящих слоях.

2. **Модуль импортируется многими модулями со своего слоя**

   - Возможно, модуль имеет лишнюю ответственность.
   - Следует вынести его (частично или целиком) на слой ниже, либо перенести логику связей в модули на вышестоящих слоях.

3. **Модуль имеет импорты из множества модулей со своего слоя**
   - Возможно, модуль принадлежит к другой области ответственности.
   - Следует вынести его (частично или целиком) на слой выше.
